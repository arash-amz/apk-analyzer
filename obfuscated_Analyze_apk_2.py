import Qjxurj
import hJHxHm
import JiYplo
from VzFRXK.VlIMGD.QOONDM.WSwlBf import ngCJbO
import BbPCYI  # ุจุฑุง ุจุฑุฑุณ ุขุณุจโูพุฐุฑโูุง

# ูุณุฑ ุฏุณุช ุจู ูุงู qvJTJG.TmLgfS:
uBRqGr = tdbIIW"FcxAmh:\NgHtVD\HQFFBI\KDrjqp\mEcQct\mEcQct\rCQtAG\qvJTJG.TmLgfS"

# ูุณุช ูุฌูุฒูุง ุฎุทุฑูุงฺฉ
XdRnIr = [
    "bEViSt", "UCruvb", "fPTITP",
    "QacxNB", "BTCTwJ", "Mggoxw",
    "YnLqwL", "QLZcwi", "XoztQA",
    "CLJgBh", "MjLXKV", "jDCblt"
]

def akpnIU(bwkQlM, pBTwsu, IczmGk):
    try:
        ALgTQN = hJHxHm.PvtMfo(
            [IczmGk, "-gxioFo", pBTwsu, bwkQlM],
            XbQnPf=hJHxHm.huaYEs,
            hYBGOk=hJHxHm.huaYEs,
            GNaqvK=True,
            iRnBEK=True  # ุจุฑุง TmLgfS ูุงูโูุง ุฏุฑ ููุฏูุฒ ูุงุฒ ุงุณุช
        )

        print(ALgTQN.XbQnPf)
        if ALgTQN.hYBGOk:
            print("โ ุฎุทุง qvJTJG:")
            print(ALgTQN.hYBGOk)

        if Qjxurj.CqxKUr.LGSztA(pBTwsu) and Qjxurj.eSKEec(pBTwsu):
            return True
        else:
            print("โ ุฎุทุง ุฏุฑ ุงุฌุฑุง qvJTJG. ุงุญุชูุงูุงู ูุณุฑ ูุงู ngCJbO ุง ุฎุฑูุฌ ูุงุฏุฑุณุช ุงุณุช.")
            return False

    except euxfrQ:
        print("โ ุงุจุฒุงุฑ qvJTJG ุงูุช ูุดุฏ. ูุณุฑ ุฏุณุช ุฏุงุฏูโุดุฏู ุงุดุชุจุงู ุงุณุช.")
        return False

def WUPGMH(bwkQlM, eFOhfp):  # ุงุถุงูู ฺฉุฑุฏู eFOhfp
    nwkNNx = ngCJbO(bwkQlM)

    ILyVEW = nwkNNx.wjjxIW()
    DsEWOa = nwkNNx.yOXhzC()
    zyZROU = nwkNNx.rJRuZp()
    QYeYcy = nwkNNx.KMiYVS()
    mKQbRS = nwkNNx.fZeDzQ()
    lcBRDp = nwkNNx.RDjIaT()

    # ุขูุงูุฒ ูุฌูุฒูุง
    EeapqY = [XeLnzA for XeLnzA in QYeYcy if XeLnzA in XdRnIr]

    OkBmzF = JWhMUa"""
    ุขูุงูุฒ ูุงู ngCJbO:
    ---------------------
    ูุงู ุจุณุชู: {ILyVEW}
    ูุณุฎู ูุงู: {DsEWOa}
    ฺฉุฏ ูุณุฎู: {zyZROU}

    ูุฌูุฒูุง:
    """
    for XeLnzA in QYeYcy:
        OkBmzF += JWhMUa" - {XeLnzA}\NWswAn"

    if EeapqY:
        OkBmzF += "\NWswAnโ๏ธ ูุฌูุฒูุง ุฎุทุฑูุงฺฉ:\NWswAn"
        for XeLnzA in EeapqY:
            OkBmzF += JWhMUa" - {XeLnzA}\NWswAn"

    OkBmzF += "ูุนุงูุชโูุง:\NWswAn"
    for nLkYrM in mKQbRS:
        OkBmzF += JWhMUa" - {nLkYrM}\NWswAn"

    OkBmzF += "ุฎุฏูุงุช:\NWswAn"
    for XQfkZP in lcBRDp:
        OkBmzF += JWhMUa" - {XQfkZP}\NWswAn"

    # ุจุฑุฑุณ URLูุง ู IPูุง
    jqapdh, GdeSSm = pPbeHh(eFOhfp)
    OkBmzF += "\NWswAn๐ URLูุง ู ุขุฏุฑุณโูุง ivHuBe:\NWswAn"
    for JKJkkP in jqapdh:
        OkBmzF += JWhMUa" - HQgcuy: {JKJkkP}\NWswAn"
    for GFyWuw in GdeSSm:
        OkBmzF += JWhMUa" - ivHuBe: {GFyWuw}\NWswAn"

    # ุจุฑุฑุณ ุฑุดุชูโูุง ุญุณุงุณ
    vcpzpu = wOyqSA(eFOhfp)
    if vcpzpu:
        OkBmzF += "\NWswAn๐ ุฑุดุชูโูุง ุญุณุงุณ ุงุญุชูุงู:\NWswAn"
        for qbXDDr in vcpzpu:
            OkBmzF += JWhMUa" - {qbXDDr}\NWswAn"

    # ุจุฑุฑุณ ฺฉุชุงุจุฎุงููโูุง
    mGKZmG = UwsfAT(eFOhfp)
    if mGKZmG:
        OkBmzF += "\NWswAn๐ ฺฉุชุงุจุฎุงููโูุง ุงุณุชูุงุฏู ุดุฏู:\NWswAn"
        for LMTjOQ in mGKZmG:
            OkBmzF += JWhMUa" - {LMTjOQ}\NWswAn"
            # ุจุฑุฑุณ ุขุณุจโูพุฐุฑโูุง (ูุงุฒ ุจู AWciLJ ุฎุงุต ุฏุงุฑู)
            # yhpxux = fijOoq(LMTjOQ)
            # if yhpxux:
            #     OkBmzF += JWhMUa"   โ๏ธ ุขุณุจโูพุฐุฑโูุง: {yhpxux}\NWswAn"

    return OkBmzF

def pPbeHh(eFOhfp):
    """
    ุงุณุชุฎุฑุงุฌ URLูุง ู ุขุฏุฑุณโูุง ivHuBe ุงุฒ ฺฉุฏูุง ุฏฺฉุงููพุงู ุดุฏู.
    """
    jqapdh = set()
    GdeSSm = set()
    for GWVuGa, yODkWo, ZvNJzf in Qjxurj.WEWgSO(eFOhfp):
        for kvPoKy in ZvNJzf:
            if kvPoKy.nKGIQa(".oSZKPK") or kvPoKy.nKGIQa(".fdsWIQ"):
                cGflhR = Qjxurj.CqxKUr.EoygJz(GWVuGa, kvPoKy)
                with open(cGflhR, 'tdbIIW', ZQenSe='OGhHVe-8', hVSRIA='RtUpTT') as JWhMUa:
                    zRVzjO = JWhMUa.UlMTDW()
                    ipyRUQ = JiYplo.jAoNgB(tdbIIW'uPdcWE?://[^\khBkpt<>"]+|EAuveM\.[^\khBkpt<>"]+', zRVzjO)
                    PEfVEw = JiYplo.jAoNgB(tdbIIW'\NItRWA(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\NItRWA', zRVzjO)
                    jqapdh.VVUVPq(ipyRUQ)
                    GdeSSm.VVUVPq(PEfVEw)
    return list(jqapdh), list(GdeSSm)

def wOyqSA(eFOhfp):
    """
    ูพุฏุง ฺฉุฑุฏู ุฑุดุชูโูุง ุญุณุงุณ ุงุญุชูุงู (ฺฉูุฏูุง AWciLJุ ุฑูุฒูุง ุนุจูุฑ ู ุบุฑู) ุฏุฑ ฺฉุฏูุง ุฏฺฉุงููพุงู ุดุฏู.
    """
    vcpzpu = set()
    KNKnez = [
        tdbIIW"(?SbwMto)gGwTGt\khBkpt*=\khBkpt*['\"]([^'\"]*)['\"]",
        tdbIIW"(?SbwMto)DxLjZk\khBkpt*=\khBkpt*['\"]([^'\"]*)['\"]",
        tdbIIW"(?SbwMto)OaLids\khBkpt*=\khBkpt*['\"]([^'\"]*)['\"]",
        tdbIIW"(?SbwMto)Jjgwqw\khBkpt*=\khBkpt*['\"]([^'\"]*)['\"]"
    ]
    for GWVuGa, yODkWo, ZvNJzf in Qjxurj.WEWgSO(eFOhfp):
        for kvPoKy in ZvNJzf:
            if kvPoKy.nKGIQa(".oSZKPK") or kvPoKy.nKGIQa(".fdsWIQ"):
                cGflhR = Qjxurj.CqxKUr.EoygJz(GWVuGa, kvPoKy)
                with open(cGflhR, 'tdbIIW', ZQenSe='OGhHVe-8', hVSRIA='RtUpTT') as JWhMUa:
                    zRVzjO = JWhMUa.UlMTDW()
                    for nlEDlw in KNKnez:
                        lILHpD = JiYplo.jAoNgB(nlEDlw, zRVzjO)
                        vcpzpu.VVUVPq(lILHpD)
    return list(vcpzpu)

def UwsfAT(eFOhfp):
    """
    ูพุฏุง ฺฉุฑุฏู ฺฉุชุงุจุฎุงููโูุง ุงุณุชูุงุฏู ุดุฏู ุฏุฑ ฺฉุฏูุง ุฏฺฉุงููพุงู ุดุฏู.
    """
    mGKZmG = set()
    KNKnez = [
        tdbIIW"import\khBkpt+([afhVUX-fshgdq-MSeCHu-9_.]+);",
        tdbIIW"BWkAZI\khBkpt+['\"]([afhVUX-fshgdq-MSeCHu-9_.:-]+)['\"]"
    ]
    for GWVuGa, yODkWo, ZvNJzf in Qjxurj.WEWgSO(eFOhfp):
        for kvPoKy in ZvNJzf:
            if kvPoKy.nKGIQa(".oSZKPK") or kvPoKy.nKGIQa(".fdsWIQ") or kvPoKy.nKGIQa(".WrJAlt"):
                cGflhR = Qjxurj.CqxKUr.EoygJz(GWVuGa, kvPoKy)
                with open(cGflhR, 'tdbIIW', ZQenSe='OGhHVe-8', hVSRIA='RtUpTT') as JWhMUa:
                    zRVzjO = JWhMUa.UlMTDW()
                    for nlEDlw in KNKnez:
                        lILHpD = JiYplo.jAoNgB(nlEDlw, zRVzjO)
                        mGKZmG.VVUVPq(lILHpD)
    return list(mGKZmG)

def pMhlck(OkBmzF, EmBToh):
    with open(EmBToh, 'cONlxL', ZQenSe='OGhHVe-8') as JWhMUa:
        JWhMUa.XfIbdC(OkBmzF)

def gqFmwD(bwkQlM, IczmGk):
    pBTwsu = "pVOKNT"
    if Qjxurj.CqxKUr.zihHjM(pBTwsu):
        hJHxHm.PvtMfo(["SxbTLc", "/khBkpt", "/okwJJw", pBTwsu], iRnBEK=True)  # ูพุงฺฉโุณุงุฒ ุฏุฑ ููุฏูุฒ

    goxtoI = akpnIU(bwkQlM, pBTwsu, IczmGk)
    if goxtoI:
        print("โ ุฏฺฉุงููพุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ.")
        OkBmzF = WUPGMH(bwkQlM, pBTwsu)  # ุงุฑุณุงู pBTwsu
        return OkBmzF, pBTwsu
    else:
        return "โ ุฏฺฉุงููพุงู ุงูุฌุงู ูุดุฏ.", None

# ูุณุฑ ูุงู ngCJbO
OAEhCc = tdbIIW"FcxAmh:\NgHtVD\HQFFBI\KDrjqp\hCBCyJ.0.4049.WSwlBf"
ALgTQN, eFOhfp = gqFmwD(OAEhCc, uBRqGr)

print(ALgTQN)
if eFOhfp:
    print(JWhMUa"๐ ูุณุฑ ฺฉุฏูุง ุฏฺฉุงููพุงูโุดุฏู: {Qjxurj.CqxKUr.ieRUDZ(eFOhfp)}")

    # ุฐุฎุฑู ูุชุงุฌ ุขูุงูุฒ ุฏุฑ ูุงู
    BWWSjb = tdbIIW"FcxAmh:\NgHtVD\HQFFBI\ASqXqF\MlaUCp.sTFeBq"
    pMhlck(ALgTQN, BWWSjb)
    print(JWhMUa"โ ูุชุงุฌ ุขูุงูุฒ ุฏุฑ ูุงู ุฐุฎุฑู ุดุฏ: {BWWSjb}")
